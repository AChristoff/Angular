<div class="container form-container">
  <div class="row">
    <div class="col-lg-4"></div>
    <div class="col-lg-4">
      <h1>Registration Form</h1>
      <form #regForm="ngForm" (submit)="onRegister(regForm.controls.userPasswords['controls'])">
        <pre>{{ regForm.value | json }}</pre>
        <div class="form-group input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"> <i class="fa fa-user"></i> </span>
          </div>
          <input class="form-control"
                 placeholder="Full Name"
                 ngModel
                 required
                 pattern="[A-Z][a-z]+\s[A-Z][a-z]+"
                 name="fullName">
        </div>
        <div class="alert alert-danger" *ngIf="regForm.controls.fullName?.touched && regForm.controls.fullName.errors?.required">This field is required</div>
        <div class="alert alert-danger" *ngIf="regForm.controls.fullName?.touched && regForm.controls.fullName.errors?.pattern">Name must be in format "First Last</div>
        <div class="form-group input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
          </div>
          <input class="form-control"
                 placeholder="Email Address"
                 type="email"
                 ngModel
                 required
                 pattern='^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$'
                 name="email">
        </div>
        <div class="alert alert-danger" *ngIf="regForm.controls.email?.touched && regForm.controls.email.errors?.required">This field is required</div>
        <div class="alert alert-danger" *ngIf="regForm.controls.email?.touched && regForm.controls.email.errors?.pattern">Invalid email</div>
        <div class="form-group input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"> <i class="fa fa-phone"></i> </span>
          </div>
          <select class="custom-select"
                  style="max-width: 80px;"
                  ngModel
                  name="phoneCode">
            <option *ngFor="let code of phoneCodes" value="{{code}}">{{code}}</option>
          </select>
          <input class="form-control"
                 placeholder="Phone number"
                 type="text"
                 ngModel
                 required
                 pattern="[0-9]{9}"
                 name="phoneNumber">
        </div>
        <div class="alert alert-danger" *ngIf="regForm.controls.phoneNumber?.touched && regForm.controls.phoneNumber.errors?.required">This field is required</div>
        <div class="alert alert-danger" *ngIf="regForm.controls.phoneNumber?.touched && regForm.controls.phoneNumber.errors?.pattern">Number must be 9 digits</div>
        <div class="form-group input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"> <i class="fa fa-building"></i> </span>
          </div>
          <select class="form-control" name="jobTitle" ngModel required>
            <option disabled>Select Job Title</option>
            <option *ngFor="let  title of jobTitles" value="{{title}}">{{title}}</option>
          </select>
        </div>
        <div class="alert alert-danger" *ngIf="regForm.controls.jobTitle?.touched && regForm.controls.jobTitle.errors?.required">This field is required</div>
        
        <div ngModelGroup="userPasswords">
          <div class="form-group input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
            </div>
            <input class="form-control"
                   placeholder="Create password"
                   type="password"
                   ngModel
                   required
                   name="password">
          </div>
          <div class="alert alert-danger" *ngIf="regForm.controls.userPasswords['controls']?.password?.touched && regForm.controls?.userPasswords['controls']?.password?.errors?.required">Password is required</div>
          
          
          <div class="form-group input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
            </div>
            <input class="form-control"
                   placeholder="Repeat password"
                   type="password"
                   ngModel
                   required
                   name="confirmPassword">
          </div>
          <div class="alert alert-danger" *ngIf="regForm.controls.userPasswords['controls']['confirmPassword']?.touched && regForm.controls.userPasswords['controls']['confirmPassword']?.errors?.required">Password is required</div>
          <div class="alert alert-danger" *ngIf="regForm.controls.userPasswords['controls']?.password?.touched && (regForm.controls.userPasswords['controls']?.password?.value !== regForm.controls.userPasswords['controls']?.confirmPassword?.value)">Passwords no not match!</div>
        </div>
        
        <div class="form-group">
          <button type="submit"
                  class="btn btn-primary btn-block"
                  [disabled]="(regForm.controls.userPasswords['controls']['password']?.value !== regForm.controls.userPasswords['controls']['confirmPassword']?.value) || regForm.invalid"> Create Account
          </button>
        </div>
        <p class="text-center">Have an account? <a href="">Log In</a></p>
      </form>
    </div>
    <div class="col-lg-4"></div>
  </div>
</div>
